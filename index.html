<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cek Khodam</title>
  <style>
    body.light-theme {
      background-color: #f9f9f9;
      color: #333;
    }

    body.dark-theme {
      background-color: #333;
      color: #f9f9f9;
    }

    #result {
      font-size: 1.5em;
      font-weight: bold;
      opacity: 0;
      transition: opacity 1s ease-in-out, transform 1s ease-in-out;
    }

    #result.show {
      opacity: 1;
      transform: scale(1.1);
    }

    #historyList {
      list-style-type: none;
      padding: 0;
    }

    #historyList li {
      margin: 5px 0;
    }

     button {
      margin: 5px 0;
      padding: 10px;
      cursor: pointer;
    }

    button:disabled {
      background-color: #ddd;
      cursor: not-allowed;
    }

    select {
      margin: 10px 0;
      padding: 5px;
    }
  </style>
</head>
<body>
  <h1>Cek Khodam</h1>
  
  <form id="khodamForm">
    <label for="name">Masukkan Nama Anda:</label><br>
    <input type="text" id="name" name="name" required oninput="checkName()"><br>
    <button type="submit" id="submitBtn">Cek Khodam</button>
  </form>

  <h3>Riwayat Khodam:</h3>
  <ul id="historyList"></ul>

  <button id="resetHistory">Reset Riwayat</button>

  <label for="theme">Pilih Tema Warna:</label>
  <select id="theme">
    <option value="light">Terang</option>
    <option value="dark">Gelap</option>
  </select>

  <div id="result"></div>

  <script>
    const khodamNames = [
      "Jin Pendamping", "Malaikat Pelindung", "Sosok Gaib", "Penjaga Alam", 
                "Pohon Hikmah", "Angin Pencerah", "Bayangan Misterius", "Cahaya Kebenaran",
                "Laptop Bijaksana", "Komputer Gaib", "Botol Energi", "Keyboard Suci",
                "Batu Karang", "Pedang Terbang", "Mata Elang", "Api Biru",
                "Singa Emas", "Naga Hitam", "Hujan Panas", "Kilat Merah",
                "Satria Baja Hitam", "Dewi Sri", "Pandawa Lima", "Rama Shinta",
                "Bayu Angkasa", "Roro Jonggrang", "Jaka Tarub", "Pangeran Diponegoro", "Sucipto", 
                "Kacung Salto", "Jokowi", "Prabroro", "Ganjar Pekob", "Agus Minta Salim", "Ubi Jalar", 
                "Ultraman Mullet", "Terkadang", "Botak Mullet", "Jam Dindingpun Tertawa", "Jawa", "Skibidi",
                "Sigma", "Kosong", "Windah Batubara", "Ponakan Zeus"
            ];

    let usedNames = JSON.parse(localStorage.getItem('usedNames')) || [];

    function getRandomKhodamName() {
      const randomIndex = Math.floor(Math.random() * khodamNames.length);
      return khodamNames[randomIndex];
    }

    function showResult(name) {
      let resultDiv = document.getElementById('result');
      let khodamName = getRandomKhodamName();
      resultDiv.innerText = `Nama Khodam untuk ${name} adalah: ${khodamName}`;
      resultDiv.classList.add('show');

      setTimeout(() => resultDiv.classList.remove('show'), 2000);
    }

    function checkName() {
      const nameInput = document.getElementById('name').value.trim();
      const submitBtn = document.getElementById('submitBtn');
      
      if (usedNames.includes(nameInput.toLowerCase())) {
        submitBtn.disabled = true;
        submitBtn.title = 'Nama ini sudah digunakan. Silakan masukkan nama yang berbeda.';
      } else {
        submitBtn.disabled = false;
        submitBtn.title = '';
      }
    }

    document.getElementById('khodamForm').addEventListener('submit', function(e) {
      e.preventDefault();

      let nameInput = document.getElementById('name').value.trim();

      if (usedNames.includes(nameInput.toLowerCase())) {
        alert('Nama ini sudah digunakan. Silakan masukkan nama yang berbeda.');
      } else if (nameInput === '') {
        alert('Nama tidak boleh kosong.');
      } else {
        usedNames.push(nameInput.toLowerCase());
        localStorage.setItem('usedNames', JSON.stringify(usedNames));

        showResult(nameInput);

        let historyList = document.getElementById('historyList');
        let listItem = document.createElement('li');
        listItem.innerText = `Nama Khodam untuk ${nameInput} adalah: ${getRandomKhodamName()}`;
        historyList.appendChild(listItem);
      }

      document.getElementById('khodamForm').reset();
      checkName();
    });

    window.onload = function() {
      let historyList = document.getElementById('historyList');
      usedNames.forEach(function(name) {
        let listItem = document.createElement('li');
        listItem.innerText = `Nama Khodam untuk ${name} adalah: ${getRandomKhodamName()}`;
        historyList.appendChild(listItem);
      });
      
      let savedTheme = localStorage.getItem('theme') || 'light';
      document.body.className = savedTheme + '-theme';
      document.getElementById('theme').value = savedTheme;
    };

    document.getElementById('theme').addEventListener('change', function() {
      let selectedTheme = this.value;
      document.body.className = selectedTheme + '-theme';
      localStorage.setItem('theme', selectedTheme);
    });

    document.getElementById('resetHistory').addEventListener('click', function() {
      localStorage.removeItem('usedNames');
      usedNames = [];
      document.getElementById('historyList').innerHTML = '';
      alert('Riwayat Khodam telah direset.');
    });
  </script>
</body>
</html>
